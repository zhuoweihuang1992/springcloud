<svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2255" height="804" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" viewBox="0 0 2255 804"><style type="text/css"><![CDATA[
.st5 {fill:#000000;font-family:宋体;font-size:10pt}
.st6 {fill:#1f6391;font-family:华文细黑;font-size:10pt}
.st3 {fill:#1f6391;font-family:宋体;font-size:10pt}
.st1 {fill:#344961;font-family:宋体;font-size:10pt}
.st4 {fill:#454545;font-family:宋体;font-size:10pt}
.st2 {fill:#ffffff;font-family:宋体;font-size:10pt}
]]></style><defs/><g id="page1" transform="translate(5,5)"><rect x="0" width="2245" height="794" fill="#ffffff" y="0" stroke="#808080"/><path d="M0,0L462,0L462,348L0,348L0,0z" id="shape1" transform="translate(653,228.01)" fill="#ffffff" stroke-dasharray="11,5" stroke="#8d9cb1"/><g id="shape2" transform="translate(201.5,184)"><path d="M0,0L425,0L425,381L0,381L0,0z" fill="#ffffff" stroke-dasharray="11,5" stroke="#8d9cb1"/><text class="st1"><tspan x="174" y="187.5">处理相关业务</tspan></text></g><g transform="translate(279,86)"><path d="M94,58L94,0L0,0L0,58L94,58z" id="shape3" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="24" y="26">web前端</tspan></text></g><g transform="translate(671,85)"><path d="M132,58L132,0L0,0L0,58L132,58z" id="shape4" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="21" y="33.5">eureka-server</tspan></text></g><g id="shape5" transform="translate(158.5,48)"><text class="st3"><tspan x="18" y="8.5">发起上传请求 http://localhost:8080/</tspan><tspan x="67" y="23.5">uploadService/upload</tspan></text></g><g transform="translate(329,254)"><path d="M170,73L170,0L0,0L0,73L170,73z" id="shape6" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="40" y="41">uploadService</tspan></text></g><g transform="translate(226.5,474.25)"><path d="M179.5,73L179.5,0L0,0L0,73L179.5,73z" id="shape7" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="44.3" y="41">uploadService</tspan></text></g><g transform="translate(425,474.25)"><path d="M170,70L170,0L0,0L0,70L170,70z" id="shape8" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="40" y="39.5">uploadService</tspan></text></g><g id="shape9" transform="translate(373,115)"><path d="M0,0L266,0L266,-1L293.6,-1" fill="none" stroke="#236ea1"/><path d="M298,-1L292.8,-4C293.3,-3.1,293.6,-2.1,293.6,-1C293.6,.1,293.3,1.1,292.8,2L298,-1" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape10" transform="translate(355,189)"><text class="st3"><tspan x="34" y="13.5">命中server1的</tspan><tspan x="20" y="28.5">uploadService服务</tspan></text></g><g id="shape11" transform="matrix(0.62,0.78,-0.78,0.62,326,144)"><path d="M0,0L136.5,0" fill="none" stroke="#236ea1"/><path d="M140.9,0L135.7,-3C136.2,-2.1,136.5,-1.1,136.5,0C136.5,1.1,136.2,2.1,135.7,3L140.9,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape12" transform="translate(325.5,233.01)"><text class="st3"><tspan x="9" y="16">server1</tspan></text></g><g id="shape13" transform="translate(262,464)"><text class="st3"><tspan x="9" y="9">server2</tspan></text></g><g id="shape14" transform="translate(435,455)"><text class="st3"><tspan x="14" y="16.5">server3</tspan></text></g><g id="shape15" transform="matrix(0,1,-1,0,186,108.5)"><path d="M75.5,0L182,-143M0,0L151,0L151,137L0,137L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M184.4,-146.2C186.2,-144.9,186.5,-142.4,185.2,-140.6C183.9,-138.8,181.4,-138.5,179.6,-139.8C177.8,-141.1,177.5,-143.6,178.8,-145.4C180.1,-147.2,182.6,-147.5,184.4,-146.2" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,7,144)" class="st4"><tspan x="20" y="20.5"> 解决负载均衡情况</tspan><tspan x="17" y="35.5">下的文件上传不一致</tspan><tspan x="17" y="50.5">的情况：一旦用户上</tspan><tspan x="19" y="65.5">传压缩包到server1</tspan><tspan x="17" y="80.5">服务器，上传完毕后</tspan><tspan x="15" y="95.5">调用Linux的scp命令</tspan><tspan x="17" y="110.5">来实现不同的服务器</tspan><tspan x="17" y="125.5">之间的文件同步操作</tspan></text></g><g id="shape16" transform="matrix(0,1,-1,0,970.5,48)"><path d="M23,143.8L79.7,200.5M0,0L46,0L46,143.8L0,143.8L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M82.5,203.3C81,204.9,78.4,204.9,76.9,203.3C75.3,201.7,75.3,199.2,76.9,197.6C78.4,196.1,81,196.1,82.5,197.6C84.1,199.2,84.1,201.7,82.5,203.3" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-48.9,94.9)" class="st4"><tspan x="-35.5" y="68.9">通过注册中心找到对</tspan><tspan x="-2.5" y="83.9">应的服务</tspan></text></g><g transform="translate(1006,461.25)"><path d="M-14,56L80,56L108,0L14,0L-14,56z" id="shape17" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="37" y="32.5">git</tspan></text></g><g transform="translate(675,432)"><path d="M156,108.8L156,0L0,0L0,108.8L156,108.8z" id="shape18" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="33" y="58.9">config-server</tspan></text></g><g id="shape19" transform="matrix(1,0.02,-0.02,1,831,486.4)"><path d="M0,0L170.6,0" fill="none" stroke="#236ea1"/><path d="M175,0L169.8,-3C170.3,-2.1,170.6,-1.1,170.6,0C170.6,1.1,170.3,2.1,169.8,3L175,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape20" transform="translate(529.5,191.5)"><text class="st3"><tspan x="4" y="11">通过注册中心找到配置中</tspan><tspan x="56" y="26">心服务</tspan></text></g><g id="shape21" transform="translate(852.48,452.5)"><text class="st3"><tspan x="10" y="8.5">从git仓库中找到</tspan><tspan x="7" y="23.5">机器列表配置文件</tspan></text></g><g id="shape22" transform="translate(501.5,251)"><text class="st3"><tspan x="18" y="42.5">请求读取服务器配置信息</tspan></text></g><g id="shape23" transform="matrix(0,1,-1,0,253,294.5)"><path d="M60.5,0L60.5,-161M0,0L121,0L121,227L0,227L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M60.5,-165C62.7,-165,64.5,-163.2,64.5,-161C64.5,-158.8,62.7,-157,60.5,-157C58.3,-157,56.5,-158.8,56.5,-161C56.5,-163.2,58.3,-165,60.5,-165" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-53,174)" class="st4"><tspan x="-45" y="73">1.根据需要同步的服务器列表，实现</tspan><tspan x="-45" y="88">linux同步是采用的ganymed-ssh2库</tspan><tspan x="-45" y="103">包提供的ssh的功能，将文件同步到</tspan><tspan x="-45" y="118">其他机器指定的path目录下面</tspan><tspan x="-45" y="133">2.根据指定的path目录，java操作</tspan><tspan x="-45" y="148">liunx shell脚本文件进行解压，启</tspan><tspan x="-45" y="163">动</tspan></text></g><g id="shape24" transform="matrix(0,1,-1,0,480.7,623)"><path d="M-10.4,64.7L-89,64.7M53,0L53,129.3L53,0z" fill="none" stroke="#303030"/><path d="M0,64.7L-10.4,62.1L-10.4,67.3L0,64.7" stroke-linecap="round" stroke-width="1" fill="#303030" stroke="#303030"/><text transform="matrix(0,-1,1,0,-38.2,91.2)" class="st5"><tspan x="-19" y="54.2">所有机器同步完</tspan><tspan x="-25" y="69.2">成，返回发布结果</tspan><tspan x="-3" y="84.2">Msg给前端</tspan></text></g><g id="shape25" transform="translate(411,105)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">1</tspan></text></g><g id="shape26" transform="translate(343,184)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">2</tspan></text></g><g id="shape27" transform="translate(653,162)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">3</tspan></text></g><g id="shape28" transform="translate(896.48,478)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">7</tspan></text></g><g transform="translate(678,255)"><path d="M151,90L151,0L0,0L0,90L151,90z" id="shape29" fill="#3498db" stroke="#3498db"/><text class="st2"><tspan x="30" y="49.5">config-client</tspan></text></g><g id="shape30" transform="matrix(-0.01,1,-1,-0.01,753.5,345)"><path d="M0,0L82.7,0" fill="none" stroke="#236ea1"/><path d="M87,0L81.8,-3C82.4,-2.1,82.7,-1.1,82.7,0C82.7,1.1,82.4,2.1,81.8,3L87,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape31" transform="translate(738,378.51)"><text class="st3"><tspan x="7" y="28">请求获取配置文件</tspan></text></g><g id="shape32" transform="translate(738,364.49)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">6</tspan></text></g><g id="shape33" transform="matrix(1,0.05,-0.05,1,499,290.5)"><path d="M0,0L174.9,0" fill="none" stroke="#236ea1"/><path d="M179.3,0L174.1,-3C174.6,-2.1,174.9,-1.1,174.9,0C174.9,1.1,174.6,2.1,174.1,3L179.3,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape34" transform="translate(501.5,270.5)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">4</tspan></text></g><g id="shape35" transform="translate(404,378.51)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">8</tspan></text></g><g id="shape36" transform="translate(399,580)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">9</tspan></text></g><g id="shape37" transform="translate(979.5,194)"><text class="st3"><tspan x="48" y="23.5">配置中心</tspan></text></g><g id="shape38" transform="translate(425,157.5)"><text class="st3"><tspan x="19" y="19">服务集群默认轮询</tspan></text></g><g id="shape39" transform="matrix(0.93,-0.37,0.37,0.93,472,250)"><path d="M0,0L281.4,0" fill="none" stroke="#236ea1"/><path d="M285.8,0L280.6,-3C281.1,-2.1,281.4,-1.1,281.4,0C281.4,1.1,281.1,2.1,280.6,3L285.8,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape40" transform="matrix(0,1,-1,0,414,327)"><path d="M0,0L150.6,0" fill="none" stroke="#118972"/><path d="M155,0L149.8,-3C150.3,-2.1,150.6,-1.1,150.6,0C150.6,1.1,150.3,2.1,149.8,3L155,0" stroke-linecap="round" stroke-width="1" fill="#118972" stroke="#118972"/></g><g id="shape41" transform="matrix(0,1,-1,0,886.8,619.3)"><path d="M23,143.8L-76.3,177.8M0,0L46,0L46,143.8L0,143.8L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M-80.1,179.1C-80.8,177,-79.7,174.7,-77.6,174C-75.5,173.3,-73.2,174.4,-72.5,176.5C-71.8,178.6,-72.9,180.9,-75,181.6C-77.1,182.3,-79.4,181.2,-80.1,179.1" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-48.9,94.9)" class="st4"><tspan x="-35.5" y="68.9">config-server配置</tspan><tspan x="3.5" y="83.9">高可用</tspan></text></g><g id="shape42" transform="matrix(0,1,-1,0,1106,297)"><path d="M38,201L2.7,289M0,0L76,0L76,201L0,201L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M1.2,292.7C-0.9,291.9,-1.9,289.6,-1,287.5C-0.2,285.5,2.1,284.5,4.2,285.3C6.2,286.1,7.2,288.4,6.4,290.5C5.6,292.5,3.2,293.5,1.2,292.7" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-62.5,138.5)" class="st4"><tspan x="-52.5" y="82.5">config-client通过注册中心获</tspan><tspan x="-46.5" y="97.5">取config-server地址，即使</tspan><tspan x="-52.5" y="112.5">config-server配置了高可用也</tspan><tspan x="-13.5" y="127.5">能命中到存活机器</tspan></text></g><g id="shape43" transform="matrix(0,-1,1,0,753.5,255)"><path d="M0,0L108.6,0" fill="none" stroke="#236ea1"/><path d="M113,0L107.8,-3C108.3,-2.1,108.6,-1.1,108.6,0C108.6,1.1,108.3,2.1,107.8,3L113,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape44" transform="translate(738.5,164)"><path d="M0,10C0,4.5,6.7,0,15,0C23.3,0,30,4.5,30,10C30,15.5,23.3,20,15,20C6.7,20,0,15.5,0,10z" fill="#ffffff" stroke="#000000"/><text class="st5"><tspan x="12" y="14.5">5</tspan></text></g><g id="shape45" transform="translate(742,194)"><text class="st3"><tspan x="4" y="16">获取config-server地址</tspan></text></g><g id="shape46" transform="matrix(-0.01,-1,1,-0.01,1054,633)"><path d="M0,0L111.4,0" fill="none" stroke-dasharray="11,5" stroke="#236ea1"/><path d="M115.8,0L110.6,-3C111.1,-2.1,111.4,-1.1,111.4,0C111.4,1.1,111.1,2.1,110.6,3L115.8,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><path d="M0,0L104,0L104,62L0,62L0,0z" id="shape47" transform="translate(1002,633)" fill="none" stroke-dasharray="11,5" stroke="#3498db"/><g id="shape48" transform="translate(1020,647)"><text class="st3"><tspan x="9" y="13.5">本地push</tspan><tspan x="10" y="28.5">配置文件</tspan></text></g><g id="shape49" transform="translate(444,80)"><text class="st3"><tspan x="12" y="19">通过注册中心找到服务地址</tspan></text></g><g id="shape50" transform="matrix(-0.63,0.78,-0.78,-0.63,414,354)"><path d="M0,0L150.6,0" fill="none" stroke="#236ea1"/><path d="M155,0L149.8,-3C150.3,-2.1,150.6,-1.1,150.6,0C150.6,1.1,150.3,2.1,149.8,3L155,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape51" transform="matrix(0.62,0.78,-0.78,0.62,414,354)"><path d="M0,0L149.5,0" fill="none" stroke="#236ea1"/><path d="M153.9,0L148.7,-3C149.2,-2.1,149.5,-1.1,149.5,0C149.5,1.1,149.2,2.1,148.7,3L153.9,0" stroke-linecap="round" stroke-width="1" fill="#236ea1" stroke="#236ea1"/></g><g id="shape52" transform="translate(333,401)"><text class="st3"><tspan x="20" y="15.5">ssh</tspan></text></g><g id="shape53" transform="translate(438,408)"><text class="st6"><tspan x="22" y="14.5">ssh</tspan></text></g><g id="shape54" transform="matrix(0,1,-1,0,1317.8,549)"><path d="M38,143.8L115,211.8M0,0L76,0L76,143.8L0,143.8L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M118,214.4C116.5,216.1,114,216.2,112.4,214.8C110.7,213.3,110.5,210.8,112,209.1C113.5,207.5,116,207.3,117.6,208.8C119.3,210.3,119.5,212.8,118,214.4" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-33.9,109.9)" class="st4"><tspan x="-20.5" y="53.9">site.properties文</tspan><tspan x="-20.5" y="68.9">件包含需要发布的机</tspan><tspan x="18.5" y="83.9">器信息</tspan></text></g><g id="shape55" transform="matrix(0,1,-1,0,231,593.3)"><path d="M15.5,0L-46,-85.3M0,0L31,0L31,143.8L0,143.8L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M-48.3,-88.5C-46.5,-89.8,-44,-89.4,-42.8,-87.6C-41.5,-85.8,-41.9,-83.3,-43.7,-82C-45.5,-80.7,-48,-81.1,-49.2,-82.9C-50.5,-84.7,-50.1,-87.2,-48.3,-88.5" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-56.4,87.4)" class="st4"><tspan x="-28" y="76.4">与server1同步</tspan></text></g><g id="shape56" transform="matrix(0,1,-1,0,672.8,597.8)"><path d="M15.5,143.8L-53.5,162.8M0,0L31,0L31,143.8L0,143.8L0,0z" fill="#fff2e7" stroke="#e19a00"/><path d="M-57.4,163.8C-57.9,161.7,-56.7,159.5,-54.6,158.9C-52.4,158.3,-50.2,159.6,-49.6,161.7C-49.1,163.9,-50.3,166.1,-52.4,166.6C-54.6,167.2,-56.8,166,-57.4,163.8" stroke-linecap="round" stroke-width="1" fill="#e19a00" stroke="#e19a00"/><text transform="matrix(0,-1,1,0,-56.4,87.4)" class="st4"><tspan x="-28" y="76.4">与server1同步</tspan></text></g></g></svg>