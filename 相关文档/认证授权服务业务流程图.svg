<svg xmlns:ev="http://www.w3.org/2001/xml-events" xmlns="http://www.w3.org/2000/svg" width="1133" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1133 1597" height="1597"><style type="text/css"><![CDATA[
.st3 {fill:#000000;font-family:宋体;font-size:10pt}
.st2 {fill:#1f6391;font-family:宋体;font-size:10pt}
.st1 {fill:#ffffff;font-family:宋体;font-size:10pt}
]]></style><defs/><g transform="translate(5,5)" id="page1"><rect width="1123" x="0" height="1587" stroke="#808080" fill="#ffffff" y="0"/><g transform="translate(497,141)"><path stroke="#3498db" fill="#3498db" id="shape1" d="M94,56L94,0L0,0L0,56L94,56z"/><text class="st1"><tspan x="21" y="32.5">服务网关</tspan></text></g><g transform="translate(497,269)"><path stroke="#3498db" fill="#3498db" id="shape2" d="M47,58L94,29L47,0L0,29L47,58z"/><text class="st1"><tspan x="21" y="26">是否带有</tspan><tspan x="30" y="41">token</tspan></text></g><g transform="matrix(0,1,-1,0,544,37)" id="shape3"><path stroke="#236ea1" fill="none" d="M0,0L99.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M104,0L98.8,-3C99.3,-2.1,99.6,-1.1,99.6,0C99.6,1.1,99.3,2.1,98.8,3L104,0"/></g><g transform="translate(502,61)" id="shape4"><text class="st2"><tspan x="51" y="33">请求</tspan></text></g><g transform="matrix(0,1,-1,0,544,197)" id="shape5"><path stroke="#236ea1" fill="none" d="M0,0L67.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M72,0L66.8,-3C67.3,-2.1,67.6,-1.1,67.6,0C67.6,1.1,67.3,2.1,66.8,3L72,0"/></g><g transform="translate(542,217)" id="shape6"><text class="st2"><tspan x="10" y="23.5">filter过滤请求</tspan></text></g><g transform="translate(497,667)"><path stroke="#3498db" fill="#3498db" id="shape7" d="M-14,56L80,56L108,0L14,0L-14,56z"/><text class="st1"><tspan x="30" y="32.5">redis</tspan></text></g><g transform="translate(544,616)" id="shape8"><text class="st2"><tspan x="13" y="23.5">根据用户名查询redis</tspan></text></g><g transform="translate(474.5,792)"><path stroke="#3498db" fill="#3498db" id="shape9" d="M69.8,58L139.5,29L69.8,0L0,29L69.8,58z"/><text class="st1"><tspan x="13.3" y="33.5">存在该用户的token</tspan></text></g><g transform="matrix(0,1,-1,0,544,723)" id="shape10"><path stroke="#236ea1" fill="none" d="M0,0L64.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M69,0L63.8,-3C64.3,-2.1,64.6,-1.1,64.6,0C64.6,1.1,64.3,2.1,63.8,3L69,0"/></g><g transform="translate(614,821)" id="shape11"><path stroke="#236ea1" fill="none" d="M0,0L113,0L113,-244.5L-0,-244.5"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M-4.4,-244.5L.8,-241.5C.3,-242.4,-0,-243.4,-0,-244.5C-0,-245.6,.3,-246.6,.8,-247.5L-4.4,-244.5"/></g><g transform="translate(616,792)" id="shape12"><text class="st2"><tspan x="20" y="21">是</tspan></text></g><g transform="translate(628,548)" id="shape13"><text class="st2"><tspan x="8" y="16.5">验证token</tspan></text></g><g transform="translate(497,397)"><path stroke="#3498db" fill="#3498db" id="shape14" d="M94,56L94,0L0,0L0,56L94,56z"/><text class="st1"><tspan x="23" y="32.5">service</tspan></text></g><g transform="matrix(0,1,-1,0,544,327)" id="shape15"><path stroke="#236ea1" fill="none" d="M0,0L65.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M70,0L64.8,-3C65.3,-2.1,65.6,-1.1,65.6,0C65.6,1.1,65.3,2.1,64.8,3L70,0"/></g><g transform="translate(534,345)" id="shape16"><text class="st2"><tspan x="20" y="21">是</tspan></text></g><g transform="translate(373,476)" id="shape17"><text class="st2"><tspan x="5" y="18.5">发送用户信息以及token到</tspan><tspan x="16" y="33.5">认证授权服务进行验证</tspan></text></g><g transform="matrix(0,-1,1,0,562,543)" id="shape18"><path stroke="#236ea1" fill="none" d="M0,0L84.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M89,0L83.8,-3C84.3,-2.1,84.6,-1.1,84.6,0C84.6,1.1,84.3,2.1,83.8,3L89,0"/></g><g transform="translate(561,472)" id="shape19"><text class="st2"><tspan x="14" y="16">返回验证</tspan><tspan x="26" y="31">flag</tspan></text></g><g transform="matrix(0,1,-1,0,544.3,850)" id="shape20"><path stroke="#236ea1" fill="none" d="M0,0L66.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M71,0L65.8,-3C66.3,-2.1,66.6,-1.1,66.6,0C66.6,1.1,66.3,2.1,65.8,3L71,0"/></g><g transform="translate(497.25,921)"><path stroke="#3498db" fill="#3498db" id="shape21" d="M20,40L74,40C85,40,94,31,94,20C94,9,85,0,74,0L20,0C9,0,0,9,0,20C0,31,9,40,20,40z"/><text class="st1"><tspan x="34" y="24.5">结束</tspan></text></g><g transform="translate(538,864)" id="shape22"><text class="st2"><tspan x="13" y="23.5">否，验证失败</tspan></text></g><g transform="translate(142,257)"><path stroke="#3498db" fill="#3498db" id="shape23" d="M68.5,84.2L137,42.1L68.5,0L0,42.1L68.5,84.2z"/><text class="st1"><tspan x="17" y="46.6">是否带有用户信息</tspan></text></g><g transform="matrix(-1,0.01,-0.01,-1,497,298)" id="shape24"><path stroke="#236ea1" fill="none" d="M0,0L213.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M218,0L212.8,-3C213.3,-2.1,213.6,-1.1,213.6,0C213.6,1.1,213.3,2.1,212.8,3L218,0"/></g><g transform="translate(435,271)" id="shape25"><text class="st2"><tspan x="22" y="16">否</tspan></text></g><g transform="translate(184,667)"><path stroke="#3498db" fill="#3498db" id="shape26" d="M-14,56L80,56L108,0L14,0L-14,56z"/><text class="st1"><tspan x="30" y="32.5">mysql</tspan></text></g><g transform="translate(210.5,341.21)" id="shape27"><path stroke="#236ea1" fill="none" d="M0,0L0,206.8L267.1,206.8"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M271.5,206.8L266.3,203.8C266.8,204.7,267.1,205.7,267.1,206.8C267.1,207.9,266.8,208.9,266.3,209.8L271.5,206.8"/></g><g transform="translate(207.5,366.5)" id="shape28"><text class="st2"><tspan x="5.3" y="21.1">是，发送用户信息到</tspan><tspan x="5.3" y="36.1">认证授权服务进行登</tspan><tspan x="20.3" y="51.1">录，生成token</tspan></text></g><g transform="translate(158.13,778)"><path stroke="#3498db" fill="#3498db" id="shape29" d="M72.5,82L145,41L72.5,0L0,41L72.5,82z"/><text class="st1"><tspan x="14.5" y="45.5">是否存在该用户数据</tspan></text></g><g transform="matrix(-0.01,1,-1,-0.01,231,723)" id="shape30"><path stroke="#236ea1" fill="none" d="M0,0L50.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M55,0L49.8,-3C50.3,-2.1,50.6,-1.1,50.6,0C50.6,1.1,50.3,2.1,49.8,3L55,0"/></g><g transform="translate(230.61,860)" id="shape31"><path stroke="#236ea1" fill="none" d="M0,0L0,81L262.3,81"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M266.6,81L261.4,78C262,78.9,262.3,79.9,262.3,81C262.3,82.1,262,83.1,261.4,84L266.6,81"/></g><g transform="translate(252,906)" id="shape32"><text class="st2"><tspan x="6" y="23">否，登录失败</tspan></text></g><g transform="translate(294.75,768)" id="shape33"><text class="st2"><tspan x="7.3" y="25.5">是，登录成功并且</tspan><tspan x="16.3" y="40.5">生成token返回</tspan></text></g><g transform="translate(497,580.5)" id="shape34"><path stroke="#236ea1" fill="none" d="M0,0L-266,0L-266,82.1"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M-266,86.5L-263,81.3C-263.9,81.8,-264.9,82.1,-266,82.1C-267.1,82.1,-268.1,81.8,-269,81.3L-266,86.5"/></g><g transform="translate(482,534)"><path stroke="#3498db" fill="#3498db" id="shape35" d="M127.6,85L127.6,0L0,0L0,85L127.6,85z"/><text class="st1"><tspan x="12.3" y="47">权限认证授权服务</tspan></text></g><g transform="matrix(0,1,-1,0,534,454)" id="shape36"><path stroke="#236ea1" fill="none" d="M0,0L77.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M82,0L76.8,-3C77.3,-2.1,77.6,-1.1,77.6,0C77.6,1.1,77.3,2.1,76.8,3L82,0"/></g><g transform="translate(123,609)" id="shape37"><text class="st2"><tspan x="7" y="21">根据用户名查询</tspan><tspan x="39" y="36">数据</tspan></text></g><g transform="matrix(0,1,-1,0,534,617)" id="shape38"><path stroke="#236ea1" fill="none" d="M0,0L47.6,0"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M52,0L46.8,-3C47.3,-2.1,47.6,-1.1,47.6,0C47.6,1.1,47.3,2.1,46.8,3L52,0"/></g><g transform="translate(303.09,819)" id="shape39"><path stroke="#236ea1" fill="none" d="M0,0L139.4,0L139.4,-210L174.5,-210"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M178.9,-210L173.7,-213C174.2,-212.1,174.5,-211.1,174.5,-210C174.5,-208.9,174.2,-207.9,173.7,-207L178.9,-210"/></g><g transform="translate(142,299.11)" id="shape40"><path stroke="#236ea1" fill="none" d="M0,0L-51,0L-51,693.9L402.3,693.9L402.3,666.3"/><path stroke-linecap="round" stroke-width="1" stroke="#236ea1" fill="#236ea1" d="M402.3,661.9L399.3,667.1C400.1,666.6,401.2,666.3,402.3,666.3C403.3,666.3,404.4,666.6,405.3,667.1L402.3,661.9"/></g><g transform="translate(40,345)" id="shape41"><text class="st2"><tspan x="22" y="33">否</tspan></text></g><g transform="translate(122,80)" id="shape42"><path stroke-width="2.66667" stroke="#c26383" fill="#ffffff" d="M17.3,0L139.8,0C149.3,0,179.4,25.3,157.1,55.3C157.1,55.3,199,61.5,199,61.5C199,61.5,157.1,68.7,157.1,67.6C175.8,88.6,149.3,123,139.8,123L17.3,123C7.7,123,0,118.1,0,112.1L0,10.9C0,4.9,7.7,0,17.3,0z"/><text class="st3"><tspan x="12.5" y="51">首先必须要向认证授权服</tspan><tspan x="12.5" y="66">务的注册接口注册用户信</tspan><tspan x="77.5" y="81">息</tspan></text></g></g></svg>